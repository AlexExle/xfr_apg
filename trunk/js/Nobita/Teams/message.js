!function(t){XenForo.Team_SharePostInline=function(t){this.__construct(t)},XenForo.Team_SharePostInline.prototype={__construct:function(e){this.$form=e,this.$textarea=e.find("textarea"),this.$buttons=e.find(".button"),this.submitPending,this.$stories=t(this.$form.data("stories")),this.$form.on("submit",t.context(this,"submit"))},submit:function(e){e.preventDefault(),this.$buttons.prop("disabled",!0).addClass("disabled"),this.submitPending&&(this.submitPending.abort(),this.submitPending=!1);var n=this.$form.serializeArray(),o=this.$textarea.data("XenForo.BbCodeWysiwygEditor");o&&o.resetEditor(),this.submitPending=XenForo.ajax(this.$form.attr("action"),n,t.context(this,"response")),this.$textarea.val(""),this.$form.find(".AttachmentList.New li:not(#AttachedFileTemplate)").xfRemove(),this.$form.find(".AttachmentInsertAllBlock").xfRemove()},response:function(e){if(this.submitPending=!1,setTimeout(function(){this.$buttons.prop("disabled",!1).removeClass("disabled")}.bind(this),2e3),XenForo.hasResponseError(e))return!1;var n=t(e.templateHtml);new XenForo.ExtLoader(e,function(){n.xfInsert("prependTo",this.$stories,0,"xfSlideDown",function(){new XenForo.Team_NewsFeedBox(this),componentHandler.upgradeDom()})}.bind(this))}},XenForo.Team_WatchUnwatchContent=function(t){this.__construct(t)},XenForo.Team_WatchUnwatchContent.prototype={__construct:function(e){this.$link=e,this.$link.on("click",t.context(this,"watchUnwatch"))},watchUnwatch:function(e){e.preventDefault();var n=t(e.currentTarget),o="watch",s="unwatch",i={};n.hasClass(s)&&(i.stop=1),XenForo.ajax(n.attr("href"),i,function(t){return XenForo.hasResponseError(t)?!1:(n.hasClass(o)?n.removeClass(o).addClass(s):n.removeClass(s).addClass(o),void n.find("span").text(t.linkPhrase))})}},XenForo.Team_CommentComposingHandler=function(t){this.__construct(t)},XenForo.Team_CommentComposingHandler.prototype={__construct:function(e){this.$textarea=e,this.$commentList=t(this.$textarea.data("container")),this.waiting=!1,this.KEY_CODES={ENTER:13,SHIFT:16},this.$textarea.on("keydown",t.context(this,"composing")),this.$textarea.on("submit",t.context(this,"submit"))},composing:function(e){var n=t(e.target);return 13!=e.keyCode&&13!=e.charCode||e.shiftKey?void 0:void n.trigger("submit")},submit:function(e){var n=t(e.target),o=n.data("url").trim(),s=n.data("params")||{};!this.waiting&&o.length&&this.$commentList.length&&(n.prop("disabled",!0).addClass("disabled"),s=XenForo.ajaxDataPush(s,"message",n.val().trim()),this.waiting=!0,XenForo.ajax(o,s,t.context(this,"response")))},response:function(e){if(this.waiting=!1,this.$textarea.prop("disabled",!1).removeClass("disabled").css({height:"auto"}).val("").blur(),XenForo.hasResponseError(e))return!1;var n=t(e.templateHtml);new XenForo.ExtLoader(e,function(){n.xfInsert("appendTo",this.$commentList,0,"xfSlideUp",function(){componentHandler.upgradeDom()})}.bind(this))}},XenForo.register(".Team_WatchUnwatchContent","XenForo.Team_WatchUnwatchContent"),XenForo.register(".Team_SharePostInline","XenForo.Team_SharePostInline"),XenForo.register(".Team_CommentComposingHandler","XenForo.Team_CommentComposingHandler")}(jQuery,this,document);